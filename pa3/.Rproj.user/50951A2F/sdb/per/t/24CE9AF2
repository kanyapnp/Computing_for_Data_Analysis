{
    "contents" : "file <- \"outcome-of-care-measures.csv\"\noutcome <- read.csv(file, colClasses = \"character\")\n\ncols_id <- c(11,17,23)\n\n\nfor(i in cols_id){\n    outcome[,i] = as.numeric(outcome[,i])\n}\n\n\nhist_generator <- function(){\n  # format the plot\n  par(mfrow = c(1,3))\n  titles <- c(\"Heart Attack\", \"Heart Failure\", \"Pneumonia\")\n  \n  # multiple plots\n  for (i in 1:3){\n    \n    #compute the mean and sd of the column\n    u = mean(outcome[,cols_id[i]], na.rm=TRUE)\n    sd = sqrt(var(outcome[,cols_id[i]], na.rm=TRUE))\n    \n    # format the title\n    title = substitute(title * \"(\" * bar(x) * \" = \" * mean * \")\", list(title = titles[i], mean = u))\n    \n    #make histogram\n    hist(outcome[,cols_id[i]], main=title, xlab=\"30-day Death Rate\", xlim=c(5,25), prob=TRUE)\n  \n    #add a line indicating the median value\n    median <- median(outcome[,cols_id[i]], na.rm= TRUE)\n    abline(v = median)\n    \n    #add the density approximation, using normal distribution\n    x <- seq(5,25,0.01)\n    lines(x, dnorm(x, mean=u, sd=sd))\n  }   \n}\n\n\n# hist_generator()\n\nbox_generator <- function(){\n  \n  # get the list containing states with at least 20 hospitals\n  state_table <- table(outcome$State)\n  more_than_20 <- state_table >= 20\n  states_20_plus <- names(state_table[more_than_20])\n  \n  # remove the states with less than 20 hospitals from the dataset\n  on_list <- outcome$State %in% states_20_plus\n  outcome2 <- outcome[on_list,]\n  \n  death <- outcome2[,11]\n  state <- outcome2$State\n  par(mfrow=c(1,1), las=2 )\n#   boxplot(death ~ state, data = median_death,main=\"Heart Attack 30-day Death Rate by State\", ylab=\"30-day Death Rate by State\")\n  \n  # split the data into states\n  death_in_state <- split(outcome2[,11], outcome2$State)\n  \n  # compute the median of deathes in every state\n  median_death <- sapply(death_in_state, mean, na.rm=TRUE)\n  \n  # sort the list\n  median_death <- sort(median_death)\n  \n  state_names <- names(median_death)\n  \n  #modify the factor using sorted levels\n  state <- factor(state, state_names)\n  \n  \n  # add the modified x-axis\n  names_w_num <- c()\n  for(i in state_names){\n    state_num = paste(i,'(',state_table[i],')',sep='')\n    names_w_num = append(names_w_num, state_num)\n  }\n  par(cex.axis=1, las=2)\n  boxplot(death ~ state, main=\"Heart Attack 30-day Death Rate by State\", ylab=\"30-day Death Rate by State\", xaxt=\"n\")\n  axis(1, at=1:length(state_names), labels = names_w_num, cex.axis=0.7)\n  \n\n}\n\nlibrary(lattice)\n\nxy_generator(){\n  outcome <- read.csv(\"outcome-of-care-measures.csv\", colClasses = \"character\")\n  hospital <- read.csv(\"hospital-data.csv\", colClasses = \"character\")\n  \n  outcome.hospital <- merge(outcome, hospital, by = \"Provider.Number\")\n  death <- as.numeric(outcome.hospital[, 11]) ## Heart attack outcome\n  npatient <- as.numeric(outcome.hospital[, 15])\n  owner <- factor(outcome.hospital$Hospital.Ownership)\n  \n  xyplot(death ~ npatient|owner,  xlab=\"Number of Patients Seen\", ylab=\"30-day Death Rate\",\n         main=\"Heart Attack 30-day Death Rate by Ownership\", panel = function(x,y,...){\n           panel.xyplot(x,y)\n           panel.lmline(x,y)\n           }  )\n}\n\n\n",
    "created" : 1359022618268.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2843846347",
    "id" : "24CE9AF2",
    "lastKnownWriteTime" : 1358500180,
    "path" : "~/Dropbox/Codes/Github/Computing_for_Data_Analysis/pa3/hw3.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}